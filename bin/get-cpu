#!/bin/bash
# https://stackoverflow.com/questions/9229333/how-to-get-overall-cpu-usage-e-g-57-on-linux
value=$(top -bn1 | grep "Cpu(s)" | sed "s/.*, *\([0-9.]*\)%* id.*/\1/" | awk '{print 100 - $1}')
int=${value%.*}

emoji=ðŸ§ 

if [ -f /sys/devices/system/cpu/cpu0/cpufreq/energy_performance_preference ]; then
  governor=$(cat /sys/devices/system/cpu/cpu0/cpufreq/energy_performance_preference)

  if [ "performance" = "${governor}" ]; then
    emoji=ðŸ“ˆ
  else
    emoji=ðŸ“‰
  fi
fi

if [ "$int" -lt 20 ]; then
  echo "${emoji} Relajado"
elif [ "$int" -lt 80 ]; then
  echo "${emoji} Trabajando"
else
  echo "${emoji} Agobiado"
fi
